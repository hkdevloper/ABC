const current_modal=[];let el_name;domEl=e=>dom_el(e),dom_el=e=>null!=document.querySelector(e)&&document.querySelector(e),domEls=e=>dom_els(e),dom_els=e=>document.querySelectorAll(e).length>0&&document.querySelectorAll(e),validateForm=e=>{let t=0,r={};try{dom_els(`${e} .required`).forEach(e=>{if(changeCss(e,"!border-error-400","remove",!0),""===e.value){let a=e.getAttribute("name"),l=e.getAttribute("data-parent"),o=e.getAttribute("data-error-message"),n=e.getAttribute("data-error-inline"),d=e.getAttribute("data-error-heading");null!==l?changeCss(`.${l} .clickable`,"!border-error-400"):changeCss(e,"!border-error-400","add",!0),e.focus(),o&&(n?unhide(`.${a}-inline-error`):showNotification(d,o,"error"));let i={el:e,el_parent:l,show_error_inline:n};throw e.addEventListener("keyup",clearErrors.bind(null,i),!1),t++,r}})}catch(a){}return 0===t},clearErrors=e=>{let t=e.el,r=e.el_parent,a=e.el_name,l=e.show_error_inline;""!==t.value?(null!==r?dom_el(`.${r} .clickable`).classList.remove("!border-error-400"):t.classList.remove("!border-error-400"),l&&hide(`.${a}-inline-error`)):(null!==r?dom_el(`.${r} .clickable`).classList.add("!border-error-400"):t.classList.add("!border-error-400"),l&&unhide(`.${a}-inline-error`))},isNumberKey=(e,t=1)=>{let r=1===t?/[\d\b\\.]/:/\d\b/;e.key.toString().match(r)||8===e.keyCode||9===e.keyCode||e.preventDefault()},callUserFunction=func=>{""!==func&&void 0!==func&&eval(func)},serialize=e=>{let t=new FormData(dom_el(e)),r={};for(let[a,l]of t)r[document.getElementsByName(a)[0].getAttribute("data-serialize-as")??a]=l;return r},stringContains=(e,t)=>"string"==typeof e&&-1!==e.indexOf(t),doNothing=()=>{},changeCssForDomArray=(e,t,r="add")=>{dom_els(e).length>0&&dom_els(e).forEach(e=>{changeCss(e,t,r,!0)})},changeCss=(e,t,r="add",a=!1)=>{if(!a&&null!=dom_el(e)||a&&null!=e){if(-1!==t.indexOf(",")||-1!==t.indexOf(" "))for(let l of t=t.replace(/\s+/g,"").split(","))"add"===r?a?e.classList.add(l.trim()):dom_el(e).classList.add(l.trim()):a?e.classList.remove(l.trim()):dom_el(e).classList.remove(l.trim());else(!a&&void 0!==dom_el(e).classList||a&&void 0!==e.classList)&&("add"===r?a?e.classList.add(t):dom_el(e).classList.add(t):a?e.classList.remove(t):dom_el(e).classList.remove(t))}},showModal=e=>{unhide(`.bw-${e}-modal`),document.body.classList.add("overflow-hidden");let t=0===current_modal.length?0:current_modal.length+1;animateCSS(`.bw-${e}`,"zoomIn").then(()=>{current_modal[t]=e})},hideModal=e=>{hide(`.bw-${e}-modal`),current_modal.pop(),document.body.classList.remove("overflow-hidden"),dom_el(`.bw-${e}-modal`).removeEventListener("keydown",trapFocusInModal)},showButtonSpinner=e=>{unhide(`${e} .bw-spinner`)},hideButtonSpinner=e=>{hide(`${e} .bw-spinner`)},showModalActionButtons=e=>{unhide(`.bw-${e} .modal-footer`)},hideModalActionButtons=e=>{hide(`.bw-${e} .modal-footer`)},hide=(e,t=!1)=>{(!t&&null!=dom_el(e)||t&&null!=e)&&changeCss(e,"hidden","add",t)},unhide=(e,t=!1)=>{(!t&&null!=dom_el(e)||t&&null!=e)&&changeCss(e,"hidden","remove",t)},animateCSS=(e,t)=>new Promise((r,a)=>{let l=`animate__${t}`,o=document.querySelector(e);function n(e){o.classList.remove("animate__animated",l),e.stopPropagation(),r("Animation ended")}o.classList.remove("hidden"),o.classList.add("animate__animated",l),document.documentElement.style.setProperty("--animate-duration",".5s"),o.addEventListener("animationend",n,{once:!0})}),addToStorage=(e,t,r="localStorage")=>{(window.localStorage||window.sessionStorage)&&("localStorage"===r?localStorage.setItem(e,t):sessionStorage.setItem(e,t))},getFromStorage=(e,t="localStorage")=>{if(window.localStorage||window.sessionStorage)return"localStorage"===t?localStorage.getItem(e):sessionStorage.getItem(e)},removeFromStorage=(e,t="localStorage")=>{(window.localStorage||window.sessionStorage)&&("localStorage"===t?localStorage.removeItem(e):sessionStorage.removeItem(e))},goToTab=(e,t,r)=>{let a=r.replace(/-/g,"_"),l=dom_el(".bw-tc-"+e);if(null===l)return alert("no matching x-bladewind.tab-content div found for this tab"),!1;changeCssForDomArray(`.${r}-headings li.atab span`,`text-${t}-500,border-${t}-500,hover:text-${t}-500,hover:border-${t}-500`,"remove"),changeCssForDomArray(`.${r}-headings li.atab span`,"text-gray-500,border-transparent,hover:text-gray-600,hover:border-gray-300"),changeCss(`.atab-${e} span`,"text-gray-500,border-transparent,hover:text-gray-600,hover:border-gray-300","remove"),changeCss(`.atab-${e} span`,`text-${t}-500,border-${t}-500,hover:text-${t}-500,hover:border-${t}-500`),dom_els(`.${a}-tab-contents div.atab-content`).forEach(e=>{hide(e,!0)}),unhide(l,!0)},positionPrefix=(e,t="blur")=>{let r="1"===dom_el(`.dv-${e} .prefix`).getAttribute("data-transparency")?-5:7,a=(dom_el(`.dv-${e} .prefix`).offsetWidth+r)*1,l="0.875rem",o=dom_el(`input.${e}`),n=dom_el(`.dv-${e} label`);"blur"===t?(n&&(n.style.left=""===o.value?`${a}px`:l),dom_el(`input.${e}`).style.paddingLeft=`${a}px`,o.addEventListener("focus",t=>{positionPrefix(e,t.type),o.removeEventListener("focus",positionPrefix)},{once:!0})):"focus"===t&&(n&&(n.style.left=l),o.addEventListener("blur",t=>{positionPrefix(e,t.type),o.removeEventListener("blur",positionPrefix)},{once:!0}))},positionSuffix=e=>{let t="1"===dom_el(`.dv-${e} .suffix`).getAttribute("data-transparency")?-5:7,r=(dom_el(`.dv-${e} .suffix`).offsetWidth+t)*1;dom_el(`input.${e}`).style.paddingRight=`${r}px`},togglePassword=(e,t)=>{let r=dom_el(`input.${e}`);"show"===t?(r.setAttribute("type","text"),unhide(`.dv-${e} .suffix svg.hide-pwd`),hide(`.dv-${e} .suffix svg.show-pwd`)):(r.setAttribute("type","password"),unhide(`.dv-${e} .suffix svg.show-pwd`),hide(`.dv-${e} .suffix svg.hide-pwd`))},filterTable=(e,t)=>{domEls(`${t} tbody tr`).forEach(t=>{t.innerText.toLowerCase().includes(e.toLowerCase())?unhide(t,!0):hide(t,!0)})},selectTag=(e,t)=>{let r=domEl(`input[name="${t}"]`),a=r.getAttribute("data-max-selection"),l=domEl(`.bw-${t}-${e}`),o=l.getAttribute("class");if(r.value.includes(e)){let n=`(,?)${e}`;r.value=r.value.replace(r.value.match(n)[0],""),changeCss(l,o.match(/bg-[\w]+-500/)[0],"remove",!0),changeCss(l,o.match(/bg-[\w]+-500/)[0].replace("500","200"),"add",!0),changeCss(l,o.match(/text-[\w]+-50/)[0],"remove",!0),changeCss(l,o.match(/text-[\w]+-50/)[0].replace("50","500"),"add",!0)}else(""===r.value?0:r.value.split(",").length)<a?(r.value+=`,${e}`,changeCss(l,o.match(/bg-[\w]+-200/)[0],"remove",!0),changeCss(l,o.match(/bg-[\w]+-200/)[0].replace("200","500"),"add",!0),changeCss(l,o.match(/text-[\w]+-500/)[0],"remove",!0),changeCss(l,o.match(/text-[\w]+-500/)[0].replace("500","50"),"add",!0)):showNotification(r.getAttribute("data-error-heading"),r.getAttribute("data-error-message"),"error");stripComma(r)},stripComma=e=>{e.value.startsWith(",")&&(e.value=e.value.replace(/^,/,""))},highlightSelectedTags=(e,t)=>{if(""!==e){let r=e.split(",");for(let a=0;a<r.length;a++)selectTag(r[a].trim(),t)}},compareDates=(e,t,r,a)=>{let l=dom_el(`.${e}`),o=dom_el(`.${t}`);setTimeout(()=>{let n=new Date(l.value).getTime(),d=new Date(o.value).getTime();if(""!==n&&""!==d)return n>d?(changeCss(o,"!border-error-400","add",!0),1!==a?showNotification("",r,"error"):dom_el(`.error-${e}${t}`).innerHTML=r,!1):(changeCss(o,"!border-error-400","remove",!0),!0)},100)},trapFocusInModal=e=>{let t=current_modal[current_modal.length-1];if(void 0!==t){let r=dom_els(`.bw-${t}-modal input:not([type='hidden']):not([class*='hidden']), .bw-${t}-modal button:not([class*="hidden"]),  .bw-${t}-modal a:not([class*="hidden"])`),a=r[0],l=r[r.length-1];"Tab"!==e.key||(e.shiftKey&&document.activeElement===a?(e.preventDefault(),l.focus()):e.shiftKey||document.activeElement!==l||(e.preventDefault(),a.focus()))}};
